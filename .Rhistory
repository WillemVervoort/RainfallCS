shiny::runApp()
shiny::runApp()
install.packages("RODBC")
shiny::runApp()
?dateRangeInput
require(shiny)
?dateRangeInput
SysDate()
Syssate()
Sysdate()
sysDate()
??Sys
?Sys.date
?Sys.Date
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
?paste
shiny::runApp()
shiny::runApp()
?match
shiny::runApp()
?collapse
??collapse
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
?cat
shiny::runApp()
?switch
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
x <- 1:10
y <- 2*x+rnorm(10)
lm.test <- lm(y~x)
summary(lm.test)
summary(lm.test)$Coefficients
str(summary(lm.test))
summary(lm.test)$coefficients
summary(lm.test)$coefficients[2,4]
coef(lm.test)
coef(lm.test)[2]
lm.mod
lm.test
summary(lm.test)
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
library(RODBC)
db <- odbcConnect("testwillem", uid="rver4657", pwd="7564revrMySQL")
# # testing ODBC
# # find the names of the available tables
# sqlTables(db)
#
# load the different tables into a data fram
df_main <- sqlQuery(db, "select * from main_table")
df_regr_results <- sqlQuery(db, "select * from regr_results")
df_regr_stats <- sqlQuery(db, "select * from regr_stats")
df_main''
df_main
ncol(df_main)
df_main <- cbind(df_main,c("35609","2014-01-01", "21:04:06","1956-01-01","1956-01-02","testing"))
df_main <- rbind(df_main,c("35609","2014-01-01", "21:04:06","1956-01-01","1956-01-02","testing"))
df_main
df_main <- sqlQuery(db, "select * from main_table")
df_main
df_main[1,] <- c("35609","2014-01-01", "21:04:06","1956-01-01","1956-01-02","testing")
df_main
shiny::runApp()
shiny::runApp()
splitTime <- strsplit(as.character(Sys.time())," ")
shiny::runApp()
shiny::runApp()
library(shiny)
library(RODBC)
# connect to data source
db <- odbcConnect("testwillem", uid="rver4657", pwd="7564revrMySQL")
# # testing ODBC
# # find the names of the available tables
# sqlTables(db)
#
# load the different tables into a data fram
df_main <- sqlQuery(db, "select * from main_table")
df_regr_results <- sqlQuery(db, "select * from regr_results")
df_regr_stats <- sqlQuery(db, "select * from regr_stats")
View(df_regr_results)
df_regr_results
?lm
odbcClose(db)
x <- seq(1,10)
x <- seq(1,100)
x <- 1:100
y <- 2*x +3 +rnorm(100)
lm(y~x)
test <- lm(y~x)
coefficients(test)
summary(test)
summary(test)$coefficients
summary(test)$coefficients[1,1]
df_regr_stats
mod.sum <- summary(lm.mod)
summary(test)
str(summary(test))
summary(test)$fstatistic
?sqSave
?sqlSave
shiny::runApp()
df_main
shiny::runApp()
df_main
df_regr_results
shiny::runApp()
names(df_main)
shiny::runApp()
df_main
names(df_main)
sqlUpdate(db, df_main, tablename="main_table")
db <- odbcConnect("testwillem", uid="rver4657", pwd="7564revrMySQL")
df_main <- sqlQuery(db, "select * from main_table")
sqlUpdate(db, df_main, tablename="main_table")
shiny::runApp()
splitTime <- strsplit(as.character(Sys.time())," ")
splitTime
splitTime[[1]][1]
shiny::runApp()
odbcClose(db)
odbcClose(db)
shiny::runApp()
?on.exit
shiny::runApp()
shiny::runApp()
odbcClose(db)
?sqlSave
shiny::runApp()
shiny::runApp()
shiny::runApp()
odbcClose(db)
odbcClose(db)
shiny::runApp()
shiny::runApp()
?onClose
??onClose
?>exit
??exit
??execute
?dbdisconnect
??dbdisconnect
??db.disconnect
??disconnect
??db
??close
shiny::runApp()
shiny::runApp()
?odbc
??odbc
library(shiny)
library(RODBC)
# connect to data source
db <- odbcConnect("testwillem", uid="rver4657", pwd="7564revrMySQL")
# # testing ODBC
# # find the names of the available tables
# sqlTables(db)
#
# load the different tables into a data fram
df_main <- sqlQuery(db, "select * from main_table")
df_main
odbcClose(db)
library(shiny)
library(RODBC)
# connect to data source
db <- odbcConnect("testwillem", uid="rver4657", pwd="7564revrMySQL")
# # testing ODBC
# # find the names of the available tables
# sqlTables(db)
#
# load the different tables into a data fram
df_main <- sqlQuery(db, "select * from main_table")
df_main
df_main[1,] <- c("400352", Sys.Date(), "10:00:00", "2000-01-01", "2005-01-01", "testing", "rain")
sqlSave(db, df_main, tablename="main_table", rownames=FALSE,safer=F)
?sqlSave
df_main
sqlDrop(db, sqtable="main_table")
sqlSave(db, df_main, tablename="main_table", rownames=FALSE)
shiny::runApp()
str(df_main)
df_main <- sqlQuery(db, "select * from main_table")
str(df_main)
?sqlQuery
df_main <- sqlQuery(db, "select * from main_table",as.is = c(1,6,7))
str(df_main)
df_main <- sqlQuery(db, "select * from main_table",as.is = c(1,6,7),
stringsAsFactors=F)
str(df_main)
df_regr_results <- sqlQuery(db, "select * from regr_results")
str(df_regr_results)
df_main <- sqlQuery(db, "select * from main_table",as.is = c(1,2,6,7),
stringsAsFactors=F)
str(df_main)
df_main[1,] <- c("400352", as.Date(Sys.Date()), "10:00:00", "2000-01-01", "2005-01-01", "testing", "rain")
df_main[1,] <- c("400352", as.Date(Sys.Date()), "10:00:00", "2000-01-01", "2005-01-01", "testing", "rain")
try(sqlDrop(db, sqtable="main_table", errors = F), silent=T)
sqlSave(db, df_main, tablename="main_table", rownames=FALSE,safer=F)
df_main <- sqlQuery(db, "select * from main_table",as.is = c(1,2,6,7),
stringsAsFactors=F)
str(df_main)
shiny::runApp()
shiny::runApp()
shiny::runApp()
load("stations.Rdata")
?grep
head(stations)
grep("cootamundra", stations)
grep("cootamundra", stations,ignore.case=T)
grep("cootam", stations,ignore.case=T)
grep("harden", stations,ignore.case=T)
grep("harden", stations$SITE_NAME,ignore.case=T)
grep("harden", stations$Site_name,ignore.case=T)
grep("cootamundra", stations$Site_name,ignore.case=T)
shiny::runApp()
shiny::runApp()
shiny::runApp()
library(shiny)
library(RODBC)
load("stations.Rdata")
# Source the dataripper script to get the data from the BOM site
# This is adaption of Jason Lessels' bomDailyDataripper
source("dataripper.r")
plot.fun <- function(Dates = DateInput(),
Data=StationInput(),
d.type=input$type) {
# define labels
if (d.type=="rain") lab <- "Rainfall"; plot.t <- "h"
if (d.type=="min_temp") lab <- "Minimum Temperature"; plot.t <- "l"
if (d.type=="max_temp") lab <- "Maximum Temperature"; plot.t <- "l"
# find begin and end dates from info
time1 <- match(Dates$Startdate,Data$Date)
time2 <- match(Dates$Enddate,Data$Date)
# make the plot
plot(Data$Date[time1:time2],
Data[time1:time2,6],
type=plot.t,col="blue",
xlab= "Date", ylab=lab)
lines(Data$Date[time1:time2],Dates$lm.line, col="red",lty=2,lwd=3)
}
input$Station <- "Cootamundra"
input <- list()
input$Station <- "Cootamundra"
name <- list()
name$name <- stations[grep(input$Station,stations$Site_name,
ignore.case=T),c("Site","Site_name","STA")]
name$name
input$state <- NSW
input$state <- "NSW"
name$name2 <- name$name[grep(input$state,name$name$STA),]
name$name2
str(name)
name$name2$Site
?uiOutput
input$choice <- name$name2$Site[5]
input$type <- "rain"
data <- bomDailyObs(input$choice,observation=input$type)
head(data)
input$dateRange <- c("1990-01-01", as.Date(Sys.date))
input$dateRange <- c("1990-01-01", as.Date(Sys.date()))
input$dateRange <- c("1990-01-01", as.Date(Sys.Date()))
input$dateRange
Sys.Date
Sys.Date()
input$dateRange <- c("1990-01-01", Sys.Date())
Sys.Date()
input$dateRange
input$dateRange <- c("1990-01-01", format(Sys.Date(),"%Y-%m-%d")
)
input$dateRange
begin <- input$dateRange[1]
end <- input$dateRange[2]
StationInput <- reactive({
if (input$goButton == 0)
return()
# use dataripper to download data from BOM station
data <- bomDailyObs(input$choice,observation=input$type)
return(data)
})
if (begin >= min(StationInput()$Date)) {
dates$Startdate <- begin
dates$StartMsg <- paste("data analysis will start from",begin)
} else {
dates$Startdate <- min(StationInput()$Date)
dates$StartMsg <- paste("the data only starts at", min(StationInput()$Date))
})
if (begin >= min(StationInput()$Date)) {
dates$Startdate <- begin
dates$StartMsg <- paste("data analysis will start from",begin)
} else {
dates$Startdate <- min(StationInput()$Date)
dates$StartMsg <- paste("the data only starts at", min(StationInput()$Date))
}
temp <- match(dates$Startdate,data$Date)#StationInput()$Date)
begin
dates$Startdate <- min(data$Date)#StationInput()$Date)
dates <- list()
dates$Startdate <- min(data$Date)#StationInput()$Date)
dates$Enddate <- max(data$Date)
temp <- match(dates$Startdate,data$Date)#StationInput()$Date)
temp
temp2 <- match(dates$Enddate,data$Date)#StationInput()$Date)
tmep2
temp2
shiny::runApp()
df <- data.frame(time=1:nrow(data[temp:temp2,]),#StationInput()[temp:temp2,]),
response=data[temp:temp2,6] #StationInput()[temp:temp2,6])
# run the regression (start simple with just linear)
lm.mod <- lm(response~time,df)
df <- data.frame(time=1:nrow(data[temp:temp2,]),#StationInput()[temp:temp2,]),
response=data[temp:temp2,6]) #StationInput()[temp:temp2,6])
# run the regression (start simple with just linear)
lm.mod <- lm(response~time,df)
splitTime <- strsplit(as.character(Sys.time())," ")
lm.line <- predict(lm.mod,
new.data=data.frame(time=1:nrow(data[temp:temp2,],#StationInput()[temp:temp2,]),
response=rep(0,nrow(df))))
lm.line <- predict(lm.mod,
new.data=data.frame(time=1:nrow(data[temp:temp2,]),#StationInput()[temp:temp2,]),
response=rep(0,nrow(df))))
#
dates$lm.line[as.numeric(names(lm.line))] <- lm.line
dates$lm.mod <- lm.mod
shiny::runApp()
shiny::runApp()
shiny::runApp()
Data <- data
Dates <- list()
Dates$Startdate <- "1990-01-01"
Dates$Startdate <- begin
Dates$Enddate <- end
d.type="rain"
if (d.type=="rain") lab <- "Rainfall"; plot.t <- "h"
if (d.type=="min_temp") lab <- "Minimum Temperature"; plot.t <- "l"
if (d.type=="max_temp") lab <- "Maximum Temperature"; plot.t <- "l"
# find begin and end dates from info
time1 <- match(Dates$Startdate,Data$Date)
time2 <- match(Dates$Enddate,Data$Date)
time1
Dates$Startdate
Data$Date
Dates$Startdate
Dates$Startdate <- "1995-01-01"
time1 <- match(Dates$Startdate,Data$Date)
time2 <- match(Dates$Enddate,Data$Date)
time1
head(Data)
is.character(Data$Date)
as.Date(Dates$Startdate)
time1 <- match(as.Date(Dates$Startdate),as.Date(Data$Date))
time1
time2 <- match(as.Date(Dates$Enddate),as.Date(Data$Date))
plot(Data$Date[time1:time2],
Data[time1:time2,6],
type=plot.t,col="blue",
xlab= "Date", ylab=lab)
lm.line
shiny::runApp()
shiny::runApp()
head(lm.line)
shiny::runApp()
shiny::runApp()
time1
time2
is.numeric(time2)
time1 <- match(as.Date(Dates$Startdate),as.Date(Data$Date))
time1
plot(Data$Date[time1:time2],
Data[time1:time2,6],
type=plot.t,col="blue",
xlab= "Date", ylab=lab)
lines(Data$Date[time1:time2],Dates$lm.line, col="red",lty=2,lwd=3)
Dates$lm.line
shiny::runApp()
head(Daat)
head(Data)
Data$Date[time1:time2]
Data[time1:time2,6]
shiny::runApp()
?sqlsave
?sqlSave
library(shiny)
library(RODBC)
db <- odbcConnect("testwillem", uid="rver4657", pwd="7564revrMySQL")
?sqlSave
df_main <- sqlQuery(db, "select * from main_table",as.is = c(1,2,6,7),
stringsAsFactors=F)
df_main
shiny::runApp()
shiny::runApp()
?RODBC
shiny::runApp()
shiny::runApp()
db <- odbcConnect("testwillem", uid="rver4657", pwd="7564revrMySQL")
df_main <- sqlQuery(db, "select * from main_table",as.is = c(1,2,6,7),
stringsAsFactors=F)
df_main
df_regr_results <- sqlQuery(db, "select * from regr_results")
df_regr_results
df_regr_stats <- sqlQuery(db, "select * from regr_stats")
df_regr_stats
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
db <- odbcConnect("testwillem", uid="rver4657", pwd="7564revrMySQL")
df_main <- sqlQuery(db, "select * from main_table",as.is = c(1,2,6,7),
stringsAsFactors=F)
df_regr_results <- sqlQuery(db, "select * from regr_results")
df_regr_stats <- sqlQuery(db, "select * from regr_stats")
df_main
df_regr_results
df_regr_stats
try(sqlSave(db, stats, tablename="df_regr_stats",
rownames=FALSE, append=T))
stats <- data.frame(station_id = input$choice, rmse = mod.sum$sigma,
r_sq = mod.sum$adj.r.squared, p_value = pv,
bias = bias, stat1 = mod.sum$r.squared,
stat2 = fstat[1], stat3 = fstat[2],
stat4 = fstat[3], stat5 = NA, comment = "test")
sqlTables(db)
df_regr_results <- sqlQuery(db, "select * from df_regr_results")
df_regr_stats
df_regr_stats <- sqlQuery(db, "select * from df_regr_stats")
df_regr_stats
df_regr_results
x <- 1:12
y <- 2*x +3 +rnorm(12)
test <- lm(test)
test <- lm(y~x)
test
predict(test)
names(test)
test.l <- predict(test)
test.l
names(test.l)
x[10] <- NA
test <- lm(y~x)
test.l <- predict(test)
test.l
x <- 1:12
y[10] <- NA
test <- lm(y~x)
test.l <- predict(test)
test.l
test.l <- predict(test,new.data=data.frame(x=1:12,y=rep(0,12))
)
test.l
shiny::runApp()
odbcClose(db)
odbcClose(db)
db <- odbcConnect("testwillem", uid="rver4657", pwd="7564revrMySQL")
#
# # # testing ODBC
# # # find the names of the available tables
# # sqlTables(db)
# #
# # load the different tables into a data fram
df_main <- sqlQuery(db, "select * from main_table",as.is = c(1,2,6,7),
stringsAsFactors=F)
df_regr_results <- sqlQuery(db, "select * from regr_results")
df_regr_stats <- sqlQuery(db, "select * from regr_stats")
df_regr_results
install.packages(oz)
install.packages("oz")
library(oz)
# for fancier plotting
library(ggplot)
library(ggplot2)
install.packages("ggplot2")
oz.map <- read.csv(file.path("data", "ozdata.csv"))
oz.map <- read.csv("ozdata.csv")
require(ggplot2)
?histogram
?ggplot2
?sqlFetch
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
db <- odbcConnect("testwillem", uid="rver4657", pwd="7564revrMySQL")
dat <- sqlQuery(db,paste("select slope from regr_results"))
dat
hist(dat)
hist(as.numeric(dat))
hist(dat$slope)
shiny::runApp()
odbcClose(db)
odbcClose(db)
